<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OldSchool Library: Sound Loading</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OldSchool Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__audio__load.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Sound Loading<div class="ingroups"><a class="el" href="group__audio.html">Audio</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Functions for loading and managing sounds.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa058cef9404e6f258ba0a20b88cb7946" id="r_gaa058cef9404e6f258ba0a20b88cb7946"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa058cef9404e6f258ba0a20b88cb7946">oslLoadSoundFile</a> (const char *filename, int stream)</td></tr>
<tr class="memdesc:gaa058cef9404e6f258ba0a20b88cb7946"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a sound file and determines its format based on the file extension.  <br /></td></tr>
<tr class="separator:gaa058cef9404e6f258ba0a20b88cb7946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb6586a0e09532f2f2ae80188c24b66a" id="r_gacb6586a0e09532f2f2ae80188c24b66a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacb6586a0e09532f2f2ae80188c24b66a">oslLoadSoundFileWAV</a> (const char *filename, int stream)</td></tr>
<tr class="memdesc:gacb6586a0e09532f2f2ae80188c24b66a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a WAV sound file.  <br /></td></tr>
<tr class="separator:gacb6586a0e09532f2f2ae80188c24b66a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga095088adf570609547d32d53345728d5" id="r_ga095088adf570609547d32d53345728d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga095088adf570609547d32d53345728d5">oslLoadSoundFileBGM</a> (const char *filename, int stream)</td></tr>
<tr class="memdesc:ga095088adf570609547d32d53345728d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a BGM sound file.  <br /></td></tr>
<tr class="separator:ga095088adf570609547d32d53345728d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d409a44edac80ad1b116222283e16c2" id="r_ga0d409a44edac80ad1b116222283e16c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0d409a44edac80ad1b116222283e16c2">oslLoadSoundFileMOD</a> (const char *filename, int stream)</td></tr>
<tr class="memdesc:ga0d409a44edac80ad1b116222283e16c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a MOD sound file.  <br /></td></tr>
<tr class="separator:ga0d409a44edac80ad1b116222283e16c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1e9704de0a5588b1ccca612d96176db" id="r_gaa1e9704de0a5588b1ccca612d96176db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa1e9704de0a5588b1ccca612d96176db">oslLoadSoundFileMP3</a> (const char *filename, int stream)</td></tr>
<tr class="memdesc:gaa1e9704de0a5588b1ccca612d96176db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads an MP3 sound file.  <br /></td></tr>
<tr class="separator:gaa1e9704de0a5588b1ccca612d96176db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31ca443925f8b55d64b371cf8b5cc427" id="r_ga31ca443925f8b55d64b371cf8b5cc427"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga31ca443925f8b55d64b371cf8b5cc427">oslLoadSoundFileAT3</a> (const char *filename, int stream)</td></tr>
<tr class="memdesc:ga31ca443925f8b55d64b371cf8b5cc427"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads an AT3 (ATRAC3) sound file.  <br /></td></tr>
<tr class="separator:ga31ca443925f8b55d64b371cf8b5cc427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c48c65e8bb820e34fa9ddc1fb5402d4" id="r_ga2c48c65e8bb820e34fa9ddc1fb5402d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a> (int freq, int stereo, int shift)</td></tr>
<tr class="memdesc:ga2c48c65e8bb820e34fa9ddc1fb5402d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the sample rate for MOD file playback in OSLib.  <br /></td></tr>
<tr class="separator:ga2c48c65e8bb820e34fa9ddc1fb5402d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for loading and managing sounds. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa058cef9404e6f258ba0a20b88cb7946" name="gaa058cef9404e6f258ba0a20b88cb7946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa058cef9404e6f258ba0a20b88cb7946">&#9670;&#160;</a></span>oslLoadSoundFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> * oslLoadSoundFile </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads a sound file and determines its format based on the file extension. </p>
<p>Supported formats include WAV, MP3, AT3, and BGM. The function selects streaming or full memory loading based on the 'stream' parameter. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the sound file. </td></tr>
    <tr><td class="paramname">stream</td><td>Streaming mode; OSL_FMT_STREAM for streaming, OSL_FMT_NONE for full loading. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the loaded sound object. </dd></dl>

</div>
</div>
<a id="gacb6586a0e09532f2f2ae80188c24b66a" name="gacb6586a0e09532f2f2ae80188c24b66a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacb6586a0e09532f2f2ae80188c24b66a">&#9670;&#160;</a></span>oslLoadSoundFileWAV()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> * oslLoadSoundFileWAV </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads a WAV sound file. </p>
<p>This function specifically handles the loading of WAV sound files. It determines whether to load the file entirely into memory or to stream it from disk based on the 'stream' parameter. For more details on the parameters and the behavior regarding streamed versus fully loaded sounds, refer to <a class="el" href="#gaa058cef9404e6f258ba0a20b88cb7946" title="Loads a sound file and determines its format based on the file extension.">oslLoadSoundFile()</a>.</p>
<p>WAV files are a common uncompressed audio format that offers high fidelity, making them suitable for short sound effects where quality is a priority over file size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the WAV sound file. It should be a valid file stored on the memory stick. Alternate file sources have not been tested and may not work properly. </td></tr>
    <tr><td class="paramname">stream</td><td>Determines the mode of operation:<ul>
<li>OSL_FMT_STREAM: Sound is streamed from the file, minimizing memory usage but requiring more CPU resources.</li>
<li>OSL_FMT_NONE: Sound is completely loaded into memory, providing faster access at the cost of increased memory usage. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the loaded <a class="el" href="struct_o_s_l___s_o_u_n_d.html" title="Represents a sound object in OSLib.">OSL_SOUND</a> structure, or NULL if loading fails.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#gaa058cef9404e6f258ba0a20b88cb7946" title="Loads a sound file and determines its format based on the file extension.">oslLoadSoundFile</a> </dd></dl>

</div>
</div>
<a id="ga095088adf570609547d32d53345728d5" name="ga095088adf570609547d32d53345728d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga095088adf570609547d32d53345728d5">&#9670;&#160;</a></span>oslLoadSoundFileBGM()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> * oslLoadSoundFileBGM </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads a BGM sound file. </p>
<p>This function is designed to load BGM (Background Music) files, a custom audio format specific to OSLib. The BGM format is optimized for space efficiency, storing sound data in a mono format which takes up less room compared to uncompressed formats like WAV.</p>
<p>The function determines whether to stream the sound or load it entirely into memory based on the 'stream' parameter. Streaming uses less memory but requires more CPU resources to handle real-time decoding and playback.</p>
<p>Encoders for creating BGM files and additional tools for handling them can be found in the OSLib distribution. Additional sound formats and utilities are provided in the OSTools extension library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the BGM sound file. Ensure that this is a valid path on the memory stick as alternate storage locations have not been extensively tested. </td></tr>
    <tr><td class="paramname">stream</td><td>Determines the loading method:<ul>
<li>OSL_FMT_STREAM: Stream the sound from the file, which uses less memory.</li>
<li>OSL_FMT_NONE: Load the sound entirely into memory, which is faster but uses more memory. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the loaded <a class="el" href="struct_o_s_l___s_o_u_n_d.html" title="Represents a sound object in OSLib.">OSL_SOUND</a> structure, or NULL if the loading fails.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#gaa058cef9404e6f258ba0a20b88cb7946" title="Loads a sound file and determines its format based on the file extension.">oslLoadSoundFile</a> </dd></dl>

</div>
</div>
<a id="ga0d409a44edac80ad1b116222283e16c2" name="ga0d409a44edac80ad1b116222283e16c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d409a44edac80ad1b116222283e16c2">&#9670;&#160;</a></span>oslLoadSoundFileMOD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> * oslLoadSoundFileMOD </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a MOD sound file. </p>
<p>This function loads MOD format sound files, including variations like .mod, .it, .s3m, and .xm. MOD files are known for their tracker formats, widely used for creating music with pattern sequences. It requires linking with the MikMod library (-lmikmod). Note that OSLib currently supports only one MOD sound being played at a time; attempting to play multiple MOD sounds concurrently may result in unexpected behavior such as increased playback speed and volume.</p>
<dl class="section warning"><dt>Warning</dt><dd>Streaming is not supported for MOD files. Always set the <code>stream</code> parameter to OSL_FMT_NONE to ensure the sound is loaded entirely into RAM. Using OSL_FMT_STREAM can lead to incompatibilities in future OSLib versions.</dd>
<dd>
MOD playback is resource-intensive, significantly impacting memory usage and CPU load. It can increase CPU usage by up to 50% with certain tracks. If your application is CPU-intensive, consider using a different sound format or adjusting the MOD sample rate with <a class="el" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4" title="Sets the sample rate for MOD file playback in OSLib.">oslSetModSampleRate</a> to reduce the load.</dd></dl>
<p>It's less of an issue in applications that are GPU-intensive, where CPU cycles are available during GPU waits. Adjustments to the MOD playback settings should be carefully managed to balance performance and audio quality.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the MOD file. The file should be stored locally on the device as streaming is not supported. </td></tr>
    <tr><td class="paramname">stream</td><td>Must be OSL_FMT_NONE. Streaming is not supported for MOD files due to their resource-intensive nature.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the loaded <a class="el" href="struct_o_s_l___s_o_u_n_d.html" title="Represents a sound object in OSLib.">OSL_SOUND</a> structure, or NULL if the file fails to load. Ensure proper error handling in your application.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Linking with -lmikmod is required to use this functionality. </dd></dl>

</div>
</div>
<a id="gaa1e9704de0a5588b1ccca612d96176db" name="gaa1e9704de0a5588b1ccca612d96176db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa1e9704de0a5588b1ccca612d96176db">&#9670;&#160;</a></span>oslLoadSoundFileMP3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> * oslLoadSoundFileMP3 </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads an MP3 sound file. </p>
<p>This function loads an MP3 sound file into the OSLib sound system. MP3 is a widely-used compressed audio format that allows for efficient storage of high-quality audio. Before calling this function, it is mandatory to initialize the Media Engine audio subsystem by calling <a class="el" href="group__audio__general.html#ga3eb1e527c113b3a908ed86ab98afcadf" title="Initializes Media Engine audio support.">oslInitAudioME</a> in kernel mode. Failing to do so will result in a program crash, as MP3 playback relies on features available only in kernel mode.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the MP3 file. The file should be accessible on the device, and the path must be correctly specified. </td></tr>
    <tr><td class="paramname">stream</td><td>Determines the loading behavior:<ul>
<li>OSL_FMT_STREAM: Stream the sound from the file, using less memory but requiring more CPU for real-time decoding.</li>
<li>OSL_FMT_NONE: Load the entire sound file into memory, which uses more memory but less CPU during playback.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the loaded <a class="el" href="struct_o_s_l___s_o_u_n_d.html" title="Represents a sound object in OSLib.">OSL_SOUND</a> structure, or NULL if the file fails to load or initialization requirements are not met.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Ensure that <a class="el" href="group__audio__general.html#ga3eb1e527c113b3a908ed86ab98afcadf" title="Initializes Media Engine audio support.">oslInitAudioME</a> has been called in kernel mode prior to using this function. </dd></dl>

</div>
</div>
<a id="ga31ca443925f8b55d64b371cf8b5cc427" name="ga31ca443925f8b55d64b371cf8b5cc427"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31ca443925f8b55d64b371cf8b5cc427">&#9670;&#160;</a></span>oslLoadSoundFileAT3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___s_o_u_n_d.html">OSL_SOUND</a> * oslLoadSoundFileAT3 </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads an AT3 (ATRAC3) sound file. </p>
<p>This function handles the loading of ATRAC3 format sound files, which are proprietary audio formats developed by Sony that offer good compression rates and sound quality. Similar to MP3, initializing the Media Engine audio subsystem with <a class="el" href="group__audio__general.html#ga3eb1e527c113b3a908ed86ab98afcadf" title="Initializes Media Engine audio support.">oslInitAudioME</a> in kernel mode is required before using this function to prevent the program from crashing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the AT3 file. Ensure the file is stored locally and the path is correctly specified for successful loading. </td></tr>
    <tr><td class="paramname">stream</td><td>Determines the loading method:<ul>
<li>OSL_FMT_STREAM: Stream the sound from the file. This method minimizes memory usage but might increase CPU load due to ongoing decoding.</li>
<li>OSL_FMT_NONE: Load the sound completely into memory for quicker access at the cost of increased memory usage.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the loaded <a class="el" href="struct_o_s_l___s_o_u_n_d.html" title="Represents a sound object in OSLib.">OSL_SOUND</a> structure, or NULL if the file fails to load or if pre-conditions are not met.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The Media Engine audio subsystem must be initialized in kernel mode prior to calling this function to ensure proper functionality and to avoid crashes. </dd></dl>

</div>
</div>
<a id="ga2c48c65e8bb820e34fa9ddc1fb5402d4" name="ga2c48c65e8bb820e34fa9ddc1fb5402d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">&#9670;&#160;</a></span>oslSetModSampleRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslSetModSampleRate </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>freq</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stereo</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>shift</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the sample rate for MOD file playback in OSLib. </p>
<p>This function configures the sample rate for MOD file audio playback. Adjusting the sample rate can significantly affect both the CPU load required for decoding the audio and the playback quality. The function also requires setting a shift value to adjust the playback speed relative to the sample rate to match the internal PSP audio capabilities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">freq</td><td>Sample rate in samples per second. The higher the sample rate, the higher the CPU load:<ul>
<li>44100 Hz for high quality (default)</li>
<li>22050 Hz for medium quality</li>
<li>11025 Hz for low quality Decreasing the sample rate reduces CPU load but also audio quality. </li>
</ul>
</td></tr>
    <tr><td class="paramname">stereo</td><td>Currently, the only supported value is 1, indicating stereo output. </td></tr>
    <tr><td class="paramname">shift</td><td>Sets the playback speed adjustment. It compensates for sample rate changes to maintain proper playback speed:<ul>
<li>0: Normal speed (use with 44100 Hz)</li>
<li>1: Half speed (use with 22050 Hz to normalize speed when played at 44100 Hz)</li>
<li>2: Quarter speed (use with 11025 Hz to normalize speed when played at 44100 Hz) Values are powers of two; the actual playback speed is divided by 2^shift.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Setting sample rates other than 44100, 22050, or 11025 Hz is not recommended as it can lead to untested and unpredictable behavior. Future versions of OSLib might not support such customizations.</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Examples of typical usage:</span></div>
<div class="line"><a class="code hl_function" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a>(11025, 1, 2); <span class="comment">// Very low CPU usage, reduced sound quality</span></div>
<div class="line"><a class="code hl_function" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a>(22050, 1, 1); <span class="comment">// Balanced CPU usage and sound quality</span></div>
<div class="line"><a class="code hl_function" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a>(44100, 1, 0); <span class="comment">// High CPU usage, best sound quality</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Examples of advanced, non-recommended usage:</span></div>
<div class="line"><a class="code hl_function" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a>(22050, 1, 0); <span class="comment">// Plays at double speed</span></div>
<div class="line"><a class="code hl_function" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a>(33075, 1, 0); <span class="comment">// Plays at 1.5 times normal speed</span></div>
<div class="line"><a class="code hl_function" href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a>(11025, 1, 1); <span class="comment">// Plays at double speed, low quality</span></div>
<div class="ttc" id="agroup__audio__load_html_ga2c48c65e8bb820e34fa9ddc1fb5402d4"><div class="ttname"><a href="#ga2c48c65e8bb820e34fa9ddc1fb5402d4">oslSetModSampleRate</a></div><div class="ttdeci">void oslSetModSampleRate(int freq, int stereo, int shift)</div><div class="ttdoc">Sets the sample rate for MOD file playback in OSLib.</div></div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
